\message{ !name(_region_.tex)}\message{ !name(hw-sn1.tex)}% --------------------------------------------------------------
% This is all preamble stuff that you don't have to worry about.
% Head down to where it says "Start here"
% --------------------------------------------------------------
 
\documentclass[12pt]{article}
 
\usepackage[margin=1in]{geometry} 
\usepackage{amsmath,amsthm,amssymb,tikz-cd,tikz,mathtools}
 
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\oda}{\mathcal{O}} 
\renewcommand{\O}{\mathcal{O}} 

\newenvironment{theorem}[2][Theorem]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{lemma}[2][Lemma]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{exercise}[2][Exercise]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{problem}[2][Problem]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{question}[2][Question]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{corollary}[2][Corollary]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
 
\begin{document}

\message{ !name(_region_.tex) !offset(-3) }


\message{ !name(hw-sn1.tex) !offset(-3) }

 
% --------------------------------------------------------------
%                         Start here
% --------------------------------------------------------------
 
\title{Weekly Homework 1}%replace X with the appropriate number
\author{Yu Zhao\\ %replace with your name
Algebraic geometry} %if necessary, replace with your course title
 
\maketitle
\begin{itemize}
\item 1.
  \begin{itemize}
  \item (Define the presheaf $\mathcal{F}$). We define the presheaf 
    $$\mathcal{F}(U)=\lim_{\mathclap {\substack{\rightarrow \\V \in \mathcal{B} \\ V \subseteq U}}} F(U)$$.

    And the functor is defined naturally by the property of limit. Notice for $U$ in the base $\mathcal{F}(U)=F(U)$.
  \item (Axiom1, Locality) $U_i$ is an open covering of an open set $U$, s.t âˆˆ $\mathcal{F}(U)$ are such that $s|U_i = t|U_i$ for each set $U_i$ of the covering, then we prove $s = t$;
    \begin{enumerate}
    \item (reduce to $U\in \mathcal{B}$). $s=t \Leftrightarrow s|V=t|V$ for all $V \in \mathcal{B}$. And the locality condition also holds foe $s|V, t|V$.Hence we can reduce $U$ to a set in the base.
    \item(reduce $U_i$ to base) let $W_{ij}$ be a base cover of $U_i$, then $W_{ij}$ also forms a cover of $U$, and the locality condition holds for this cover.Hence we can reduce $U_{ij}$ to a set in the base.
    \item(proof) Obvious, by finding a base cover of $U_{ij}$ and using the exact sequence.
    \end{enumerate}
  \item (Axiom 2, gluing lemma) If $U_i$ is an open covering of an open set $U$, and if for each $i$ a section $s_i \in \mathcal{F}(U_i)$ s.t $s_i|U_i\cap U_j = s_j|U_i\cap U_j$, then we prove there is a section $s \in \mathcal{F}(U)$ such that $s|U_i = s_i$ for each i. 
    \begin{enumerate}
    \item (reduce $U$ to base). The existence of $s$ is unique by axiom 1. Hence we prove that for every $V$ in base, there is a unique section $s_V \in \mathcal{F}(V)$ such that $s_V|V\cap U_i = s_i|V\cap U_i$ for each i. Then for $W \subset V$, $s_V|W=s_W$. Hence there is a section $S$ of $U$ s.t. $S_V=s_v$ by the property of limit. And it's easy to verify that $S$ satisfy the condition. Hence we reduce $U$ in the base.
    \item (reduce $U_i$ to base) let $W_{ij}$ be a base cover of $U_{i}$ and $s_{ij}=s_i|W_{ij}$. Then $s_{ij}$ also satisfy gluing condition. And for $s$ glue them together, $s$ also glue $s_i$ by axiom 1. Hence we reduce $U_i$ to the base.
    \item (Proof) Trivial, after finding a base cover $W_{ijk}$ of $U_i\cap U_j$ and using the exact sequence.
    \end{enumerate}
  \item (the morphisms of sheaves are induced by the compatible morphisms on the base). This part is obvious, just using the property of limit. 
  \item(Remark). Another proof is based on the stalks. But it's not necessary since this lemma can be generalized with just the notion of open cover to more objects such as etale topology. 
  \end{itemize}


\item 2.Let $A$ be a local domain and $m$ its maximal ideal. Let $R=A^*$ and $S=A$ and then consider the map $f: X\to Y$ which maps $\{0\}$ to $m$ and notice $m \notin U$ for any proper openset $U\subseteq X$. So for defining the sheaf morphism, we only need to define the mapping $\mathcal{O}_Y(y)\rightarrow f_* \mathcal{O}_x(X)$ by the natural embedding of $R$ in $S$ which is obviously not a local ring homomorphism.
\item 2.2.4 If $X$ is affine, this position holds. Otherwise,let $U_i$ be an open affine cover of $X$, let $V_{ijk}$ be open affine covers of $U_i\cap U_j$. Then the following diagram commutes:
    

\begin{tikzcd}
  Hom(X,Spec \ A) \ar{r} \ar{d}{\alpha_x} & \prod Hom(U_i,Spec \  A) \ar[shift right=2]{r} \ar[shift left=2]{r} \ar{d}{\alpha_u} &  \prod Hom(V_{ijk},Spec \  A) \ar{d}{\alpha_v} \\
  Hom(A,\Gamma(X,\mathcal{O}_X))\ar{r} & \prod Hom(A,\Gamma(U_i,\mathcal{O}_{U_i})) \ar[shift right=2]{r} \ar[shift left=2]{r} &\prod Hom(A,\Gamma(V_{ijk},\mathcal{O}_{V_{ij}}))\\
\end{tikzcd}

And the first row is exact because of the glueing lemma, the second arrow is exact because of the property of sheaves.

Since $\alpha_u$ and $\alpha_v$ are isomorphisms, $\alpha_x$ is also an isomorphism.
\item 2.2.8 Since $k[\epsilon]/(\epsilon^2)$ has only one point, we have $Mor(k[\epsilon]/(\epsilon^2),X) \simeq \{(x,f)| x\in X,\ f\in Hom(\mathcal{O}_x, k[\epsilon]/(\epsilon^2))\}$. And Notice for every local homomorphism   $f\in Hom(\mathcal{O}_x, k[\epsilon]/(\epsilon^2))\}$, it will induce an residue homomorphism $k(x)\to k$, and notice $k(x)$ is a $k$-algebra, so $k(x)\simeq k$. And because $f(m_x^2)=0$, we have $Mor(k[\epsilon]/(\epsilon^2),X) \simeq \{(x,f)| x \ rational \ over \  X,\ f\in Hom(\mathcal{O}_x/m_x^2, k[\epsilon]/(\epsilon^2))\}$. For $f\in Hom(\mathcal{O}_x/m_x^2, k[\epsilon]/(\epsilon^2))\}$, $f(m_x)\in (\epsilon)$, which defines an vector space homomophism over $k$. On the otherhand if we have a vector space homomophism $f$ from $m_x/m_x^2$ to $k$, add the definition that $f(1)=1$, we define a vector space morphism from  $\mathcal{O}_x/m_x^2$,to $k[\epsilon]/(\epsilon^2)$, which is also a ring homomorphism. 
Hence we prove the conclusion.

\item 2.2.12.\
  \begin{enumerate}
  \item (Topology of $X$). We define $X=\coprod X_i/\sim$. With $x~y$ if and only if $\exists{} i,j$, s.t. $x\in U_{ij}$, $y\in U_{ji}$ and $y=\phi_{ij}(x)$.
    \begin{itemize}
    \item $\sim$ is a equivalence relation by cocycle conditions.
    \item The natural map $\Phi_i: X_i\to X$ is injective.
    \item We define $U$ open in $X$ if and only if $U\cap X_i$ is open in $X_i$.
    \item $\Phi_i$ is an open embedding, since for every $W$ open in $X_i$, $\Phi_j^{-1}(W)=\phi_{ij}(W \cap U_{ij})$.
    \end{itemize}
  \item (Sheaves on X) Here we can assume $U_{ij}=U_{ji}=X_i\cap X_j$. We define presheaf $F$, s.t 
$$F(V)=\{(s_i \in \Gamma(V \cap X_i,\mathcal{O}_{V \cap X_i}))_{i\in I}|\  \phi_{ij}(s_i|_{V\cap X_i \cap X_j\}})=s_j|_{V\cap X_i \cap X_j}\}$$ and the restriction map defined on every term $i$.

Thus for $V \subset X_i$ and $s \in \mathcal{O}_{x_i}(V)$, $(\phi_{ij}(s|_{V \cap X_I}))_{i \in I} \in F(V)$ by the cocycle condition. Hence the map $r$ from $s$ to $(\phi_{ij}(s|_{V \cap X_I}))_{i \in I}$ define a presheaf morphism of $O_{X_i}$ and $F|_{X_i}$. And it's really easy to verify that $r$ is in fact an isomorphism!

Notice $s=t$ if and only if $s_i=t_i$ for all $i\in I$ and $F|_{X_i}$ are sheaves, the locality can be directedly checked by terms. For gluing axiom, let $\{V_\alpha\}$ form a cover of $V$ , and $s_\alpha$ is a bunch of sections matching on $V_{\alpha\beta}$, then $s_{\alpha_i}$ also match with each other, hence there exists $s_i$, s.t $s_i|_{V_\alpha \cap X_i}=s_{\alpha_i}$. And it's easy to check $(s_i)_{i\in I}$ is compatible with $\phi_{ij}$ and hence in $F(V)$. So the gluing property is proved. And the ring structure of $F$ can be naturally defined by terms.
  \end{enumerate} 
   
\item 2.16
  \begin{itemize}
  \item (a) $U\cap X_f=\{f\in U|f_x \notin m_x\} =\{f\in U| \bar{f}_x\notin m_x\}=D(\bar{f})$

The fact that $X$ is covered by open affine subschemes induces that $X_f$ is open in $X$.

\item (b)Let $U_i$ be an open affine cover of $X$, $i=1,2,3\ldots,n$ and $U_i=Spec \  R_i$.

Then $a|X_f=0 \Leftrightarrow (a|_{U_i})|X_f\cap U_i=0$ for all $i \Leftrightarrow a|U_i=0$ as elements of $B_{i_f} \Leftrightarrow \exists l_i \in N$ s.t. $a|_{U_i}f|_{U_i}^{l_i}=0$ let $l$ be the max $l_i$, then $af^l|U_i=0$ and thus $af^l=0$

\item (c)$b\in \Gamma(X_f,\mathcal{O_{X_f}})$ induce that $b|_{U_i\cap X_f} \in \Gamma(U_i \cap X_f,\mathcal{O}_{U_i}\cap X_f)=B_{i_f}$. Here we assume $U_i=Spec \  B_i$ and hence $\exists l_i$ s.t $b|_{U_i\cap X_f}=a_i/f^{l_i}$. Thus let $l$ be the max $l_i$ and let $c=bf^l$, then $\exists c_i \in B_i$ s.t $c|U_i \cap X_f=c_i|U_i \cap X_f$. 

Notice $c|_{U_i \cap U_j \cap X_f}=c|_{U_i \cap U_j \cap X_f}=c|_{U_i \cap U_j \cap X_f}$. So $\exists \mu_{ij}$ s.t $c_if^{\mu_{ij}}=c_jf^{\mu_{ij}}$ on $U_i \cap U_j$. Then let $d_i=c_i f^\mu$ with $\mu$ be the max $\mu_{ij}$. Then $\exists d$ s.t. $d|U_i=d_i$ and hence $d|X_f= bf^{l+\mu}$
\item Notice $f|U_i$ is a unit, assume $fg_i=1$ for $g_i \in U_i\cap X_f$. Then for any $V$ affine open in $U_i \cap U_j$ we have $f(g_i-g_j)=0$ in $V\cap X_f$. Hence $g_i$ coincides with $g_j$ on $U_i \cap U_j$. Let $g|U_i\cap X_f=g_i$.The $fg=1$ on $X_f$. Hence $f$ is a unit.

Thus $S^{-1}f(id|X_f):\ A_f \to \Gamma(X_f, \mathcal{O}_{X_f})$ is well defined. This map is surjective by (c), and injective by (b), hence is an isomorphism.
\end{itemize}
  

\item 2.17
  \begin{itemize}
  \item (a) $f$ is obviously isomorphism in topology.

For sheaf property. We notice that for $\forall U \subset Y$

\begin{tikzcd}
  0 \ar{r} &Hom(U,\oda_U) \ar{r} \ar{d}{\alpha_U} & \prod Hom(U_i,\oda_{U_i}) \ar[shift right=2]{r} \ar[shift left=2]{r} \ar{d}{\alpha_{U_i}} &  \prod Hom(U_i \cap U_j, \oda_{U_i \cap U_j}) \ar{d}{\alpha_v} \\
 0\ar{r} &  Hom(f^{-1}U,\oda_{f^{-1}(U))} \ar{r} & \prod Hom(f^{-1}U_i,\oda_{f^{-1}(U_i})) \ar[shift right=2]{r} \ar[shift left=2]{r}  &  \prod Hom(f^{-1}(U_i \cap U_j), \oda_{f^{-1}(U_i \cap U_j)}) 
\end{tikzcd}

\end{itemize}

Hence $\alpha_U$ is isomorphism since the other two are isomporphisms.

\item(b)$id: \ A\to \Gamma(X,\oda_x)$ induce a morphism: $id_*: \ X \to Spec \  A$

Notice $X_{f_i}=id_*^{-1}$ then $\cup X_{f_i}=id_*^{-1}(\cup D(f_i))=id_*^{-1}(Spec \  A)=X$, so $X_{f_i}$ form a cover of $X$.

And $X_{f_i} \cap X_{f_j}$ is quasi-compact since it is $D(f_j)$ in $X_{f_i}$. So we only need to prove $\Gamma(X_{f_i}, \oda_{X_{f_i}})=A_{f_i}$, which has been proved in the previous problem.
\item 3.1 We define the property P of affine open sets $V$ of $Y$ bo be the property that $f^{-1}(V)$ can be covered by open affine subsets $U_i=Spec \  A_J$ and $A_J$ finite generated over $B$.

Then if $Spec \ A$ has the property, we have $f^{-1}(Spec  \ A_f)=\cup(Spec \ B_{i_f})$ and hence have the property. And notice that a finite type $Spec (A_f)$ algebra is also a $Spec \ A$ algebra, so this property is affine-local. Hence we prove this problem.
\item 3.10 \begin{itemize}
\item (a)First we reduce $Y$ to affine schemes. Let $X_i$ an affine open cover of $X$. then $p_2: \ X \times _Y Spec  \ k(y) \to f^{-1}(y)$ is an isomorphism if their restrictions on $X_i \times  _Y \ Spec  \ k(y)$ are isomorphisms. Hence we can assume $X$ affine.

Now let $X=Spec \  B$, $Y=Spec \  A$, $y=Spec \ (A_p/pA_p)$ while $p$ is a prime ideal in $A$. Then $X_y=Spec \ (B_p/pB_p)$. $p_2$ is injective since it factors through $Spec \ (B_p)$ and those two map are both injective. $im(p_2)=\{ q\subset B|pB \subset q, \ p\subset q\cap A\}=\{q\in B|q \cap A=p\}=f^{-1}(p)$.

So $p_2$ is bijective.

And for $\forall t \in B_p$ and $t \notin pB_p$, then let $t_0=ts \in B$and $s \in A-p$.

Then $D(t)=p_2^{-1}(D(t_0)\cap f^{-1}(y))$. Hence $p_2$ is open and hence is an isomorphism as topological spaces.

\item (b)$Spec \ k[s,t]/(s-t^2) \times _{Spec \  k[s]} Spec  \ k[s]/s-a)=Spec  \ k[t]/(t^2-a)$

For $a \neq 0$,$Spec  \ k[t]/(t^2-a)= \coprod Spec  \ k[t]/(t \pm \sqrt{a})$ has two points with residue $k$.

For $a=0$, $ k[t]/(t^2)$ is a one-point but not reduced scheme.

And $Spec \ k[s,t]/(s-t^2) \times _{Spec \  k[s]} Spec  \ k(s)= Spec  k(s,t)/(s-t^2)$ is the spectrum of a field with degree 2 extension over $k(s)=k(\xi)$.
\end{itemize}
\item 3.5(a) By 3.10, we can assume $Y=Spec \  K$ with $K$ a field, $X$ finite $K$ affine scheme. For every irreducible component $X_i=Spec  \ R_i$. We have $R_i$ a finite $K$-algebra and hence an algebraic extension over $K$. So the point has only one point. SO $X$ has finite opints.
\item 3.5(c) The constant map $Spec \  F_p[t] \to Spec  \ F_p$ is an example.

\end{itemize} 
% --------------------------------------------------------------
%     You don't have to mess with anything below this line.
% --------------------------------------------------------------
 
\end{document}
\message{ !name(hw-sn1.tex) !offset(-172) }

\message{ !name(_region_.tex) !offset(-177) }
